/*
 * Pines JavaScript Object
 *
 * Copyright (c) 2010-2012 Hunter Perrin
 *
 * Licensed under the GNU Affero GPL:
 *	  http://www.gnu.org/licenses/agpl.html
 */
if(!Array.prototype.indexOf)Array.prototype.indexOf=function(h,c){var b=this.length>>>0,e=Number(c)||0,e=e<0?Math.ceil(e):Math.floor(e);for(e<0&&(e+=b);e<b;e++)if(e in this&&this[e]===h)return e;return-1};
window.pines||function(h,c){var b=function(a){b.ready(a)};b.full_location="";b.rela_location="";b.safe=function(a){if(typeof a=="undefined")return"";for(var f=[/&/g,/\"/g,/\'/g,/</g,/>/g],t=["&amp;","&quot;","&#039;","&lt;","&gt;"],a=String(a),d=0,c=f.length;d<c;d++)a=a.replace(f[d],t[d]);return a};b.unsafe=function(a){if(typeof a=="undefined")return"";for(var f=[/&amp;/g,/&quot;/g,/&#039;/g,/&lt;/g,/&gt;/g],c=["&",'"',"'","<",">"],a=String(a),d=0,b=f.length;d<b;d++)a=a.replace(f[d],c[d]);return a};
b.get=function(a,f,c){if(f){a+=a.indexOf("?")==-1?"?":"&";var d=[],b;for(b in f)f.hasOwnProperty(b)&&(encodeURIComponent?d.push(encodeURIComponent(b)+"="+encodeURIComponent(f[b])):d.push(escape(b)+"="+escape(f[b])));a+=d.join("&")}!c||c=="_self"?h.location=a:c=="_top"?h.top.location=a:c=="_parent"?h.parent.location=a:c=="_blank"?h.open(a):h.open(a,c)};b.post=function(a,f,b){var d=c.createElement("form");d.action=a;d.method="POST";if(b)d.target=b;for(var e in f)if(f.hasOwnProperty(e))a=c.createElement("input"),
a.type="hidden",a.name=e,a.value=f[e],d.appendChild(a);c.body.appendChild(d);d.submit();c.body.removeChild(d)};b.paused=function(){return e};b.pause=function(){e=true};b.play=function(){e=false;n&&(n=false,l());i&&j()};b.ready=function(a){k.push(a);i&&j()};b.load=function(a){g.push(a);g.length==1&&l()};b.loadjs=function(a,f,b){if(!(o.indexOf(a)>-1)||f){p=false;f=c.createElement("script");if(b)for(var d in b)b.hasOwnProperty(d)&&f.setAttribute(d,b[d]);f.setAttribute("type","text/javascript");f.setAttribute("src",
a);g.push(f);g.length==1&&l();o[o.length]=a}};b.loadcss=function(a,b,e){if(!(q.indexOf(a)>-1)||b){b=c.createElement("link");b.setAttribute("rel","stylesheet");if(e)for(var d in e)e.hasOwnProperty(d)&&b.setAttribute(d,e[d]);b.setAttribute("type","text/css");b.setAttribute("href",a);typeof b!="undefined"&&c.getElementsByTagName("head")[0].appendChild(b);q[q.length]=a}};b.notice=function(a,b){alert((b?b:"Notice")+"\n\n"+a)};b.error=function(a,b){alert((b?b:"Error")+"\n\n"+a)};var e=false,n=false,o=[],
q=[],g=[],k=[],i=false,p=false,j=function(){if(!(g&&!p||!i||e)){if(k)for(var a=k[0];a;)k=k.slice(1),a.call(),a=k[0];k=[]}},l=function(){if(e)n=true;else{var a=g[0];typeof a=="undefined"?(p=true,j()):typeof a=="function"?(a.call(),g=g.slice(1),l()):(typeof a.readyState!="undefined"?a.onreadystatechange=function(){if(a.readyState=="loaded"||a.readyState=="complete")a.onreadystatechange=null,g=g.slice(1),l()}:a.onload=function(){g=g.slice(1);l()},typeof a!="undefined"&&c.getElementsByTagName("head")[0].appendChild(a))}},
m;c.addEventListener?m=function(){c.removeEventListener("DOMContentLoaded",m,false);i=true;j()}:c.attachEvent&&(m=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",m),i=true,j())});var r=function(){if(!i){try{c.documentElement.doScroll("left")}catch(a){setTimeout(r,1);return}j()}};if(c.attachEvent){c.attachEvent("onreadystatechange",m);h.attachEvent("onload",function(){i=true;j()});var s=false;try{s=h.frameElement==null}catch(u){}c.documentElement.doScroll&&s&&r()}else c.addEventListener&&
(c.addEventListener("DOMContentLoaded",m,false),h.addEventListener("load",function(){i=true;j()},false));h.pines=b}(window,window.document);
